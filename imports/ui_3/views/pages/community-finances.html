<template name="Community_finances">
    <!-- Page heading -->
    {{> Page_heading title=(_ 'Community finances') }}

    <div class="wrapper wrapper-content  animated fadeInRight">
    <div class="row">

    <div class="col-md-12">
        <div class="ibox ibox-dark" id='balances-report'>
            <div class="ibox-title">
                <h5>{{_ 'community'}} {{_ "'s status report"}} ({{_ 'Balance sheet'}})</h5>
                {{>iboxTools}}
            </div>
            <div class="ibox-content">
                <div class="row">
                    <div class="col-md-6 p-md">
                    {{> Custom_table report=(report 'Assets')}}
                    </div>
                    <div class="col-md-6 p-md">
                    {{> Custom_table report=(report 'Equity')}}
                    {{> Custom_table report=(report 'Liabilities')}}
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="ibox ibox-dark" id='assets-chart'>
            <div class="ibox-title">
                <h5>{{_ 'Assets'}} {{_ "'s chart"}}</h5>
                {{>iboxTools}}
            </div>
            <div class="ibox-content">
                <canvas id="balanceSheetChart" height="250"></canvas>
            </div>
        </div>
    </div>
    <div class="col-md-6">
        <div class="ibox ibox-dark" id='liabilities-chart'>
            <div class="ibox-title">
                <h5>{{_ 'Liabilities'}} {{_ "'s chart"}}</h5>
                {{>iboxTools}}
            </div>
            <div class="ibox-content">
                <canvas id="balanceSheetChart" height="250"></canvas>
            </div>
        </div>
    </div>

    <div class="col-md-12">
        <div class="ibox ibox-dark" id='account-history'>
            <div class="ibox-title">
                <h5>{{_ 'Account history'}}</h5>
                {{>iboxTools}}
            </div>
            <div class="ibox-content">
                <div class="row">
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label class="control-label" for="price">From date</label>
                            <input type="date" id="from_date" name="from_date" value="" placeholder="starting" class="form-control">
                        </div>
                    </div>
                    <div class="col-sm-3">
                        <div class="form-group">
                            <label class="control-label" for="quantity">To date</label>
                            <input type="date" id="to_date" name="to_date" value="" placeholder="until" class="form-control">
                        </div>
                    </div>
                    <div class="col-sm-4">
                        <div class="form-group">
                            <label class="control-label" for="product_name">{{_ 'Account group'}}</label>
                            <input type="text" id="account_group" name="account_group" value="" placeholder="Account group" class="form-control">
                        </div>
                    </div>
                    <div class="col-sm-2">
                        <div class="form-group">
                            <label class="control-label" for="status">{{_ 'Status'}}</label>
                            <select name="status" id="status" class="form-control">
                                <option value="1" selected="">{{_ 'Reconciled'}}</option>
                                <option value="0">{{_ 'Reconcile pending'}}</option>
                            </select>
                        </div>
                    </div>
                </div>

                <div class="table-responsive">
                    <table class="table table-striped">
                        <tbody>
                          {{#each entry in journalEntries}}
                          <tr>
                              <!--td>{{@index}}</td-->
                              <td>{{displayDate entry.valueDate}}</td>
                              <td>{{{entry.contra.display}}}</td>
                              <td>{{entry.note}}</td>
                              <td class="{{negativeClass entry}}">{{displayMoney entry.effectiveAmount}}</td>
                              <!--td>{{#if equals entry.move 'from'}} ({{entry.amount}}) {{else}} - {{/if}}</td>
                              <td>{{#if equals entry.move 'to'}} {{entry.amount}} {{else}} - {{/if}}</td-->
                              <td><strong>{{displayMoney entry.total}}</strong></td>
                              <td><button class="btn btn-white btn-xs js-view" data-id="{{entry.txId}}"><i class="fa fa-eye"></i></button></td>
                              <td><a href="" title="{{entry.ref}}"><i class="fa fa-check text-navy"></i></a></td>
                          </tr>
                          {{/each}}
                        </tbody>
                    </table>
                </div>
                <p class="text-center">{{_ 'Total change in this period'}}: <strong>{{displayMoney journalEntries.pop.total}}</strong></p>

            </div>
        </div>
    </div>

    <div class="col-md-12">
        <div class="ibox ibox-dark" id='journals'>
            <div class="ibox-title">
                <h5>{{_ 'Journals'}}</h5>
                {{>iboxTools}}
            </div>  
            <div class="ibox-content">
                <div class="dropdown">
                    <a href="" data-toggle="dropdown" class="dropdown-toggle btn btn-primary btn-sm">
                        <i class="fa fa-plus"></i> {{_ 'new'}} {{_ 'journal'}} <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu animated fadeInDown m-t-xs">
                        {{#each def in txDefs}}
                        <li><a href="" class="js-new" data-id="{{def.name}}"><i class="fa fa-plus"></i> {{_ 'new'}} {{_ def.name}}</a></li>
                        {{/each}}
                        <!--li role="separator" class="divider"></li>
                        <li><a href="" class="js-new-def"> + {{_ 'new'}} {{_ 'tx'}} {{_ 'def'}}</a></li-->
                    </ul>
                </div>
                <div class="m-b-lg"></div>
                {{> ReactiveDatatable tableData=journalsTableDataFn options=journalsOptionsFn }}
            </div>
        </div>
    </div>
   
    <div class="col-md-12">
        <div class="ibox ibox-dark" id='incomes-expenses-history'>
            <div class="ibox-title">
                <h5>{{_ 'Incomes'}}/{{_ 'Expenses'}} {{_ "'s history"}}</h5>
                {{>iboxTools}}
            </div>
            <div class="ibox-content">
                <canvas id="historyChart" height="250"></canvas>
            </div>
        </div>
    </div>

    <div class="col-md-12">
        <div class="ibox ibox-dark" id='community-status-report'>
            <div class="ibox-title">
                <h5 class="text=capitalize">{{_ 'community'}} {{_ "'s performance"}}</h5>
                {{>iboxTools}}
            </div>  
            <div class="ibox-content">
              {{> Custom_table report=(report 'Performance' 2017)}}
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="ibox ibox-dark" id='incomes-chart'>
            <div class="ibox-title">
                <h5>{{_ 'Incomes'}} {{_ "'s chart"}}</h5>
                {{>iboxTools}}
            </div>
            <div class="ibox-content">
                <canvas id="incomesChart" height="250"></canvas>
            </div>
        </div>
    </div>

    <div class="col-md-6">
        <div class="ibox ibox-dark" id='expenses-chart'>
            <div class="ibox-title">
                <h5>{{_ 'Expenses'}} {{_ "'s chart"}}</h5>
                {{>iboxTools}}
            </div>
            <div class="ibox-content">
                <canvas id="expensesChart" height="250"></canvas>
            </div>
        </div>
    </div>

    <!--div class="col-md-12">
        <div class="ibox ibox-dark" id='bills'>
            <div class="ibox-title">
                <h5>{{_ 'Bills'}}</h5>
                {{>iboxTools}}
            </div>  
            <div class="ibox-content">
            {{> ReactiveDatatable tableData=billsTableDataFn options=journalsOptionsFn }}
            <button class="js-many btn-primary">{{_ 'createMany'}}</button>
          </div>
        </div>
    </div-->
    
    <!--div class="col-md-12">
        <div class="ibox ibox-dark" id='breakdowns-nestable'>
            <div class="ibox-title">
                <h5>{{_ 'Breakdowns'}}</h5>
                {{>iboxTools}}
            </div>
            <div class="ibox-content">
                {{> Nestable_edit}}
            </div>
        </div>
    </div-->

    <div class="col-md-12">
        <div class="ibox ibox-dark" id='breakdowns'>
            <div class="ibox-title">
                <h5>{{_ 'Chart of accounts' }}</h5>
                {{>iboxTools}}
            </div>  
            <div class="ibox-content">
              <a href="" class="btn btn-primary btn-sm m-b-md js-new"><i class="fa fa-plus"></i> {{_ 'new'}} {{_ 'breakdown'}}</a>
              <h2>{{_ 'Main breakdowns'}}</h2>
              {{> ReactiveDatatable tableData=mainBreakdownsTableDataFn options=breakdownsOptionsFn }}
              <h2 clas="m-t-md">{{_ 'Other breakdowns'}}</h2>
              {{> ReactiveDatatable tableData=otherBreakdownsTableDataFn options=breakdownsOptionsFn }}
            </div>
        </div>
    </div>
    
  </div>
  </div>
</template>
