<template name="Action_button">
  {{#if action.visible options doc}}
    <button {{dataObject}} class="btn btn-{{btnSize}} btn-{{or (action.color options doc) 'white'}} text-capitalize js-{{action.name}}" title="{{#unless long}}{{_ title}}{{/unless}}">
      <i class="{{action.icon options doc}}"></i>{{#if long}} {{_ title}}{{/if}}
    </button>
  {{/if}}
</template>

<template name="Action_buttons_group">
  <div class="btn-group">
    {{#each action in _actions}}
      {{#if action.href options doc}}
      <a href="{{action.href}}">
        {{>Action_button options=options doc=doc action=action size=size}}
      </a>
      {{else}}
        {{>Action_button options=options doc=doc action=action size=size}}
      {{/if}}
    {{/each}}
  </div>
</template>

<!-- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- -->

<template name="Action_listitem">
  {{#if action.visible options doc}}
    <li><a class="text-capitalize js-{{action.name}}" href="">
      <i class="{{action.icon options doc}}"></i> {{_ title}}
    </a></li>
  {{/if}}
</template>

<template name="Action_listitems_status_change">
    {{#each status in doc.possibleNextStatuses}}
        {{>Action_listitem options=(optionsWithNewStatus status) doc=doc action=action}}
    {{/each}}
</template>

<template name="Action_buttons_dropdown">
    <div class="dropdown js-menu {{doc.entitiyName}}"> 
        <button class="btn btn-xs btn-white dropdown-toggle drop-unfoll" type="button" id="drop_{{options._id}}" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        {{#if long}}{{_ 'Actions'}} {{/if}}<i class="glyphicon glyphicon-option-horizontal"></i>
        </button>
        <ul class="slim-menu dropdown-menu pull-right animated fadeInDown m-t-xs" aria-labelledby="drop_{{options._id}}">
        {{#each action in _actions}}
            {{#if (equals action.name 'statusChange')}}
                {{>Action_listitems_status_change options=options doc=doc action=action}}
            {{else}}
                {{>Action_listitem options=options doc=doc action=action}}
            {{/if}}
            {{#if needsDividerAfter action}}
              <li role="separator" class="divider"></li>
            {{/if}}
        {{/each}}
        </ul>
    </div>
</template>
