
<template name="Accounting_bills">
    {{#if showParcelBillings}}
    <div class="ibox ibox-dark">
        <div class="ibox-title">
            <h5>{{_ 'Parcel billings'}}</h5>
            {{>iboxTools}}
        </div>
        <div class="ibox-content border-bottom">
            {{>Parcel_billings}}
        </div>
    </div>
    {{/if}}

    {{#if userHasPermission 'bills.update' communityId }}
        <div>
            {{#if userHasPermission 'bills.update' communityId }}
            <div class="btn-group pull-right">
              {{#if userHasPermission 'bills.insert' communityId}}
                {{#if equals activeBillCategory 'parcel'}}
                  <div class="dropdown">
                      <a href="" data-toggle="dropdown" class="btn btn-primary btn-sm dropdown-toggle">
                          <i class="fa fa-plus"></i> {{_ 'new'}} {{_ 'schemaBills.category.parcel'}} <b class="caret"></b>
                      </a>
                      <ul class="dropdown-menu pull-right animated fadeInDown m-t-xs">
                          {{#each parcelBilling in parcelBillings}}
                          <li><a href="" class="js-apply" data-id="{{parcelBilling._id}}">{{_ parcelBilling.note}}</a></li>
                          {{/each}}
                          <li role="separator" class="divider"></li>
                          <li><a href="" class="js-new-def"> + {{_ 'new'}} {{_ 'parcelBilling'}} {{_ 'creation'}}</a></li>
                      </ul>
                  </div>
                  <!--button class="btn btn-primary btn-sm js-new-parcel"><i class="fa fa-plus"></i><strong> {{_ 'new'}} {{_ (concat 'schemaBills.category.' activeBillCategory)}}</strong><b class="caret"></b></button-->
                  {{#unless showParcelBillings}}
                  <button class="btn btn-white btn-sm js-edit-defs" title="{{_ 'edit'}}"><i class="fa fa-pencil"></i></button>
                  {{/unless}}
                {{else}}
                  <button class="btn btn-primary btn-sm js-new"><i class="fa fa-plus"></i><strong> {{_ 'new'}} {{_ (concat 'schemaBills.category.' activeBillCategory)}}</strong></button>
                  <button class="btn btn-white btn-sm js-import" title="{{_ 'upload'}}"><i class="fa fa-upload"></i></button>
                {{/if}}
              {{/if}}
            </div>
            {{/if}}
            <p>
                {{_ 'Itt a bejövő/kimenő számlákat és albetét előírásokat látja.'}}<br>
            </p>
            <br>
            <div class="filters m-b-md">
              <div class="row">
                <div class="col-sm-12">
                  <div class="input-group">
                    <label class="control-label text-capitalize">{{_ 'bill'}} {{_'schemaBills.category.label'}}</label><br>
                    {{#each billCategory in billCategories}}
                    <button type="button" class="js-category-filter btn btn-xs btn-outline btn-default {{activeClass billCategory}}" data-value="{{billCategory}}">{{_ (concat 'schemaBills.category.' billCategory)}}</button>
                    {{/each}}
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-sm-9">
                  <input type="checkbox" name="allow" id="unpaid-only" {{b "check: unreconciledOnly"}}>
                  <label for="unpaid-only">{{_ 'Show only'}} {{_ 'Unpaid'}}/{{_ 'Unreconciled'}}</label>
                  <br>
                  <input type="checkbox" name="allow" id="unconteered-only" {{b "check: unconteeredOnly"}}>
                  <label for="unconteered-only">{{_ 'Show only'}} {{_ 'Unconteered'}}</label>
                </div>
                <div class="col-sm-3 align">
                  <button type="button" class="js-clear-filter btn btn-default btn-xs {{#unless hasFilters}}disabled{{/unless}}" data-value="cancel">
                      <i class="fa fa-times"></i> {{_ 'Clear filters'}}
                  </button>
                </div>
              </div>
            </div>
            <div>
            {{#if Template.subscriptionsReady}}
            <div class="bills">
                <h2>{{_ 'bills'}}</h2>
                {{> ReactiveDatatable tableData=billsTableDataFn options=billsOptionsFn }}
            </div>
            <div class="payments">
                <h2>{{_ 'payments'}}</h2>
                {{> ReactiveDatatable tableData=paymentsTableDataFn options=paymentsOptionsFn }}
            </div>
            {{else}}
                {{_ 'Loading'}}...
            {{/if}}
            </div>
        </div>
    {{/if}}
</template>
