<template name="Housing_page">
  <div class="content-scrollable page-content page-housing">
    
    <div style="width:100%;" class="white-box padded">
      {{#if community}}
      <div id="tab-content1" class="content">
        <div class="col-xs-8">
          <h1 id="houseName">{{community/name}}</h1>
        </div>
        <button type="button" class="primary" name="button"></button>
        <div class="row">
          <div class="col-xs-8">
            <h4 class="page-title">{{_ "community"}} {{_ "data"}}</h4>
          </div>
        </div>
        <div class="row">
          <div class="col-xs-12 col-md-6 col-lg-4 pull-right">
            <div id="house_avatar">
              <a href="{{community/avatar}}" class="simple-lightbox"><img src="{{community/avatar}}" alt="community avatar" width="100%" /></a>
            </div>
            <div>
            {{#autoForm id="communities_show" collection=communities omitFields="name,description" doc=community type="method-update" meteormethod="communities.update" singleMethodArgument=true template="bootstrap3"}}
              {{> afQuickFields}}
              <div class="row">
                <div class="col-xs-8">
                  <small>
                    <label><input type="checkbox"> {{_ "Acknowledge save effects" }}</label>
                  </small>
                </div>
                <div class="col-xs-4 text-right">
                  <button type="submit" class="btn btn-primary">{{_ "save"}}</button>
                </div>
              </div>
              {{/autoForm}}
            </div>
          </div>
          <div class="col-xs-12 col-md-6 col-lg-8">
            <div>
              {{#autoForm id="communities_name" collection=communities doc=community type="method-update" meteormethod="communities.update" singleMethodArgument=true template="bootstrap3"}}
              {{> afQuickField name='name'}}
              {{> afQuickField name='description' rows=12}}
              <!--{{#markdown}}{{{markdown_data}}}{{/markdown}}-->
              <div class="row">
                <div class="col-xs-8">
                  <small>
                    <label><input type="checkbox"> {{_ "Acknowledge save effects" }}</label>
                  </small>
                </div>
                <div class="col-xs-4 text-right">
                  <button type="submit" class="btn btn-primary">{{_ "save"}}</button>
                </div>
              </div>
              {{/autoForm}}
            </div>
            <!--div class="form-group">
              <label for="houseName">Leírás</label>
              <textarea class="form-control vert" id="houseWelcome" placeholder="Welcome" rows="12"></textarea>
            </div-->
            <div class="roles-section">
              <div class="row">
                <div class="col-xs-12 text-center">
                  <h4 class="page-title">{{_ 'roles'}}</h4>
                </div>
              </div>
              <div class="row">
                <div class="col-xs-12">
                  {{> ReactiveDatatable tableData=rolesTableDataFn options=rolesOptionsFn }}
                </div>
              </div>
              <div class="row">
                <div class="col-xs-12 text-center">
                  <button class="js-new btn btn-primary">{{_ 'createNew'}}</button>
                </div>
              </div>
            </div>
          </div>
          <ul class="list-group no-style">
            {{#each countInfo in thingsToDisplayWithCounter}}
              <li><img src="/icon/si-glyph-mail-box.svg" width="20"/>{{_ countInfo/name}}: {{countInfo/count}}</li>
            {{/each}}
          </ul>
        </div>
        <div class="parcels-section">
          <div class="row">
            <div class="col-xs-12">
              <hr>
              <h4>{{_ "Parcels of community"}}</h4>
              <br>
            </div>
          </div>
          <div class="row">
            <div class="col-xs-12">
              {{#Collapse_section id='parcel' title='parcels' collapsed=true}}
                <div class="table-responsive">
                {{> ReactiveDatatable tableData=parcelsTableDataFn options=parcelsOptionsFn }}
                </div>
                <button class="js-new btn btn-primary">{{_ 'createNew'}}</button>
              {{/Collapse_section}}
            </div>
          </div>
        </div>
      </div>
      {{else}}
        {{_ "No active community"}}
      {{/if}}
    </div>
  </div>
  
  {{sortables}}
</template>
